{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sharon\\\\Desktop\\\\final_app\\\\weatherApp\\\\frontend\\\\src\\\\views\\\\Profile.js\";\nimport React from \"react\"; // import Navbar from \"components/Navbar.js\";\n// import Daycard from \"components/Daycard.js\";\n\nimport { cities, forcast, urls, icons } from '../components/dummyData';\nimport { APIKEY } from '../redux/constants'; // import ForcastCard from \"components/ForcastCard\";\n\nexport default class Profile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.favoriteCities = () => {\n      const cityArr = this.state.citykey;\n      let requests = cityArr.map(item => fetch(`http://dataservice.accuweather.com/locations/v1/${item.city_key}?apikey=${APIKEY}`));\n      Promise.all(requests).then(responses => {\n        return responses;\n      }) // map array of responses into an array of response.json() to read their content\n      .then(responses => Promise.all(responses.map(r => r.json()))) // all JSON answers are parsed: \"citylist\" is the array of them\n      .then(cityData => this.setState({\n        citylist: cityData\n      }));\n\n      const favoriteCurrent = () => {\n        // console.log('citykey',this.state.citykey[0].city_key)\n        let requestsCurrent = cityArr.map(item => fetch(`http://dataservice.accuweather.com/currentconditions/v1/${item.city_key}?apikey=${APIKEY}`));\n        Promise.all(requestsCurrent).then(responses => {\n          return responses;\n        }).then(responses => Promise.all(responses.map(r => r.json()))).then(cityData => this.setState({\n          current: cityData\n        }));\n      };\n\n      favoriteCurrent();\n    };\n\n    this.renderCitylist = () => {\n      const {\n        citylist\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }\n      }, citylist.map(item => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 26\n          }\n        }, /*#__PURE__*/React.createElement(\"li\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }\n        }, item.LocalizedName, \" \", item.Country.LocalizedName));\n      }));\n    };\n\n    this.renderCurrent = () => {\n      const {\n        current\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }, current.map(item => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 26\n          }\n        }, /*#__PURE__*/React.createElement(\"li\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }\n        }, item.WeatherText), /*#__PURE__*/React.createElement(\"img\", {\n          src: icons[item.WeatherIcon],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }\n        }));\n      }));\n    };\n\n    this.delFavorites = () => {\n      console.log(this.state.citykey[0].city_key); // const keys = [],\n      // const i = 0,\n      // for (i in citykey)\n      // fetch(\"http://localhost:9000/delFavorites\" +citykey[0].city_key, {\n      //   method: 'POST',\n      //   headers: {'Content-Type': 'application/json'},\n      //   body: JSON.stringify()\n      // })\n      // .then(response => response.json())\n    };\n\n    this.state = {\n      citykey: [],\n      citylist: [],\n      current: []\n    };\n  } //Fetching all the data from the database + sends to the server the user.id to check\n\n\n  componentDidMount() {\n    const user = this.props.user;\n    fetch(\"http://localhost:9000/getAllCities/\" + user.user[0].id, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify()\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState({\n        citykey: data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    console.log('citylist:', this.state.citylist);\n    console.log('current:', this.state.current);\n    const {\n      citylist\n    } = this.state;\n    let count = 0;\n    let i = 0;\n\n    for (i in citylist) {\n      count = count + 1;\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"profile-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"relative block\",\n      style: {\n        height: \"500px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"absolute top-0 w-full h-full bg-center bg-cover\",\n      style: {\n        backgroundImage: \"url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2710&q=80')\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"blackOverlay\",\n      className: \"w-full h-full absolute opacity-50 bg-black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden\",\n      style: {\n        height: \"70px\",\n        transform: \"translateZ(0)\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"absolute bottom-0 overflow-hidden\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 2560 100\",\n      x: \"0\",\n      y: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"polygon\", {\n      className: \"text-gray-300 fill-current\",\n      points: \"2560 0 2560 100 0 100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"relative py-16 bg-gray-300\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mx-auto px-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"px-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-wrap justify-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"...\",\n      src: require(\"assets/img/team-3-800x800.jpg\"),\n      className: \"shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16\",\n      style: {\n        maxWidth: \"150px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-6 px-3 mt-32 sm:mt-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bg-pink-500 active:bg-pink-600 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1\",\n      type: \"button\",\n      style: {\n        transition: \"all .15s ease\"\n      },\n      onClick: this.favoriteCities,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, \"Show Favorites\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bg-blue-500 active:bg-pink-600 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1\",\n      type: \"button\",\n      style: {\n        transition: \"all .15s ease\"\n      },\n      onClick: this.delFavorites,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 25\n      }\n    }, \"clear Favorites\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full lg:w-4/12 px-4 lg:order-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex justify-center py-4 lg:pt-4 pt-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mr-4 p-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-xl font-bold block uppercase tracking-wide text-gray-700\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 27\n      }\n    }, count), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-sm text-gray-500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 27\n      }\n    }, \"Favorite locations\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-4xl font-semibold leading-normal mb-2 text-gray-800 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }, \"Jenna Stones\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-sm leading-normal mt-0 mb-2 text-gray-500 font-bold uppercase\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-map-marker-alt mr-2 text-lg text-gray-500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }\n    }), \" \", \"Los Angeles, California\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-10 py-10 border-t border-gray-300 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-wrap justify-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full lg:w-9/12 px-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-4 text-lg leading-relaxed text-gray-800\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 31\n      }\n    }, this.renderCitylist()), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 31\n      }\n    }, this.renderCurrent()))))))))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Sharon/Desktop/final_app/weatherApp/frontend/src/views/Profile.js"],"names":["React","cities","forcast","urls","icons","APIKEY","Profile","Component","constructor","props","favoriteCities","cityArr","state","citykey","requests","map","item","fetch","city_key","Promise","all","then","responses","r","json","cityData","setState","citylist","favoriteCurrent","requestsCurrent","current","renderCitylist","LocalizedName","Country","renderCurrent","WeatherText","WeatherIcon","delFavorites","console","log","componentDidMount","user","id","method","headers","body","JSON","stringify","res","data","catch","err","render","count","i","height","backgroundImage","transform","require","maxWidth","transition"],"mappings":"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","sourcesContent":["import React from \"react\";\n// import Navbar from \"components/Navbar.js\";\n// import Daycard from \"components/Daycard.js\";\nimport {cities, forcast, urls, icons} from '../components/dummyData'\nimport { APIKEY } from '../redux/constants'\n// import ForcastCard from \"components/ForcastCard\";\n\n\n\nexport default class Profile extends React.Component{\n  constructor (props) {\n    super(props);\n    this.state = {\n      citykey: [],\n      citylist: [],\n      current: []\n  }\n}\n\n//Fetching all the data from the database + sends to the server the user.id to check\ncomponentDidMount(){\n  const user = this.props.user\n    fetch(\"http://localhost:9000/getAllCities/\" + user.user[0].id, {\n      method: 'GET',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify()\n    })\n    .then(res => res.json())\n    .then(data => { \n      console.log(data);\n      this.setState({citykey:data})\n    })\n    .catch(err => {\n      console.log(err);\n    })\n  }\n\n\n  favoriteCities = () => {\n    const cityArr = this.state.citykey;\n    let requests = cityArr.map(item => \n      fetch(`http://dataservice.accuweather.com/locations/v1/${item.city_key}?apikey=${APIKEY}`\n      ));\n\n    Promise.all(requests)\n      .then(responses => {\n        return responses;\n      })\n      // map array of responses into an array of response.json() to read their content\n      .then(responses => Promise.all(responses.map(r => r.json())))\n      // all JSON answers are parsed: \"citylist\" is the array of them\n      .then(cityData => \n          this.setState({citylist:cityData}\n           ))\n          const favoriteCurrent = () => {\n            // console.log('citykey',this.state.citykey[0].city_key)\n            let requestsCurrent = cityArr.map(item => fetch(`http://dataservice.accuweather.com/currentconditions/v1/${item.city_key}?apikey=${APIKEY}`\n            ));\n            Promise.all(requestsCurrent)\n                .then(responses => {\n                return responses;\n              })\n              .then(responses => Promise.all(responses.map(r => r.json()\n              )))\n              .then(cityData => \n                  this.setState({current:cityData})\n                )\n            }\n            favoriteCurrent()\n    }\n\n          \n\n    renderCitylist = () => {\n      const {citylist} = this.state;\n      return (\n          <ul>\n          {\n              citylist.map(item => {\n                  return <div>\n                            <li>\n                                {item.LocalizedName} {item.Country.LocalizedName}\n                            </li>\n                          </div>     \n              })\n          }\n          </ul>\n      )\n    }\n\n    renderCurrent = () => {\n      const {current} = this.state;\n      return (\n          <ul>\n          {\n              current.map(item => {\n                  return <div>\n                            <li>\n                                {item.WeatherText}\n                            </li>\n                            <img src={icons[item.WeatherIcon]} />\n                          </div>     \n              })\n          }\n          </ul>\n      )\n    }\n\n\n//DO A MAP!!! LIKE WITH THE FETCH\n    delFavorites = () => {\n      console.log(this.state.citykey[0].city_key);\n      // const keys = [],\n      // const i = 0,\n      // for (i in citykey)\n      \n      // fetch(\"http://localhost:9000/delFavorites\" +citykey[0].city_key, {\n      //   method: 'POST',\n      //   headers: {'Content-Type': 'application/json'},\n      //   body: JSON.stringify()\n      // })\n      // .then(response => response.json())\n    }\n\n\n  render() {\n    console.log('citylist:' , this.state.citylist)\n    console.log('current:' , this.state.current)\n    const { citylist } = this.state\n    let count = 0;\n    let i = 0\n    for (i in citylist) {\n      count = count + 1 \n    }\n    return (\n      <>\n        <main className=\"profile-page\">\n          <section className=\"relative block\" style={{ height: \"500px\" }}>\n            <div\n              className=\"absolute top-0 w-full h-full bg-center bg-cover\"\n              style={{\n                backgroundImage:\n                  \"url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2710&q=80')\"\n              }}\n            >\n              <span\n                id=\"blackOverlay\"\n                className=\"w-full h-full absolute opacity-50 bg-black\"\n              ></span>\n            </div>\n            <div\n              className=\"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden\"\n              style={{ height: \"70px\", transform: \"translateZ(0)\" }}\n            >\n              <svg\n                className=\"absolute bottom-0 overflow-hidden\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                preserveAspectRatio=\"none\"\n                version=\"1.1\"\n                viewBox=\"0 0 2560 100\"\n                x=\"0\"\n                y=\"0\"\n              >\n                <polygon\n                  className=\"text-gray-300 fill-current\"\n                  points=\"2560 0 2560 100 0 100\"\n                ></polygon>\n              </svg>\n            </div>\n          </section>\n          <section className=\"relative py-16 bg-gray-300\">\n            <div className=\"container mx-auto px-4\">\n              <div className=\"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64\">\n                <div className=\"px-6\">\n                  <div className=\"flex flex-wrap justify-center\">\n                    <div className=\"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center\">\n                      <div className=\"relative\">\n                        <img\n                          alt=\"...\"\n                          src={require(\"assets/img/team-3-800x800.jpg\")}\n                          className=\"shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16\"\n                          style={{ maxWidth: \"150px\" }}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center\">\n                      <div className=\"py-6 px-3 mt-32 sm:mt-0\">\n                        <button\n                          className=\"bg-pink-500 active:bg-pink-600 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1\"\n                          type=\"button\"\n                          style={{ transition: \"all .15s ease\" }}\n                          onClick={this.favoriteCities}\n                        >\n                          Show Favorites\n                        </button>\n                        <br></br>\n                        <button\n                          className=\"bg-blue-500 active:bg-pink-600 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1\"\n                          type=\"button\"\n                          style={{ transition: \"all .15s ease\" }}\n                          onClick={this.delFavorites}\n                        >\n                          clear Favorites\n                        </button>\n                      </div>\n                    </div>\n                    <div className=\"w-full lg:w-4/12 px-4 lg:order-1\">\n                      <div className=\"flex justify-center py-4 lg:pt-4 pt-8\">\n                        <div className=\"mr-4 p-3 text-center\">\n                          <span className=\"text-xl font-bold block uppercase tracking-wide text-gray-700\">\n                          {count}\n                          </span>\n                          <span className=\"text-sm text-gray-500\">Favorite locations</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"text-center mt-12\">\n                    <h3 className=\"text-4xl font-semibold leading-normal mb-2 text-gray-800 mb-2\">\n                      Jenna Stones\n                    </h3>\n                    <div className=\"text-sm leading-normal mt-0 mb-2 text-gray-500 font-bold uppercase\">\n                      <i className=\"fas fa-map-marker-alt mr-2 text-lg text-gray-500\"></i>{\" \"}\n                      Los Angeles, California\n                    </div>\n                    \n                  </div>\n                  <div className=\"mt-10 py-10 border-t border-gray-300 text-center\">\n                    <div className=\"flex flex-wrap justify-center\">\n                      <div className=\"w-full lg:w-9/12 px-4\">\n                        <p className=\"mb-4 text-lg leading-relaxed text-gray-800\">\n                        </p>\n                          <div>\n                            <ul>\n                              <li>\n                                  {this.renderCitylist()}\n                              </li>\n                              <li>\n                                  {this.renderCurrent()}\n                              </li>\n                            </ul>\n                          </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </main>\n      </>\n    );\n  }\n  }"]},"metadata":{},"sourceType":"module"}